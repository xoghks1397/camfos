# Data Analysis(데이터 전 처리)

---

[TOC]

---



## Intro
> 공공데이터 포털에서 제공하는 캠핑장 데이터는 정보 부족으로 태그화 진행이 어려움
> -> 크롤링을 통해 데이터를 추가했음  
![데이터 전 처리 csv](https://user-images.githubusercontent.com/62299120/113971377-a01f5100-9873-11eb-8fe6-35a65c63428a.PNG)

### Crawling
- 네이버 지도에서 야영장명 검색하여 주소 확인 후 맞는 야영장 블로그 링크 10개의 내용과 전화번호, 홈페이지를 긁어온다.
- 전화번호 및 홈페이지는 데이터 셋에 바로 넣어준다
- 블로그 내용을 명사 카운터화 하여 태그화 하는 방법은 긍정적인 문장과 부정적인 문장을 판단하지 않아 태그 신뢰성에 문제가 있음
- -> 신뢰성을 올리기 위해 딥 러닝(자연어 처리)을 진행하여  긍정 문장만을 태그화 진행

### NLP(자연어 처리)

- 긍정/부정 문장 판단 가능하게끔 학습이 필요
- 학습 데이터는 영화리뷰 댓글 긍/부정으로 나눈 데이터를 사용  
![영화 리뷰 긍정 부정 점수](https://user-images.githubusercontent.com/62299120/113970760-6437bc00-9872-11eb-9e0f-5a86952f1e17.PNG)
- -> 긍/부정 단어(ex> 아니,싫어,별로다,긍정적,인상적)인 단어로 판단하기 때문에 학습 데이터론 상관없다고 판단
- 문장 토큰화 실행하여 단어만 살림  

- tensorflow의 Sequential모델을 사용
- -> 하나의 입력 텐서와 출력 텐서가 있는 일반적인 레이어이기 때문(긍정/부정 점수가 있어 정형적인 데이터)
- 학습 결과 및 정확성  
![학습 결과 정확률](https://user-images.githubusercontent.com/62299120/113970733-55e9a000-9872-11eb-81e3-0ad4980b2092.PNG)
- **정확성 85%로 확인**  
- 캠핑장 블로그 리뷰에서의 테스트 결과  
![감정분석 결과](https://user-images.githubusercontent.com/62299120/113970850-96e1b480-9872-11eb-9b6e-38b36b8af096.PNG)
- 캠핑장 블로그 리뷰에 대해서도 긍/부정 판단이 잘됨

### Logic
- 블로그 리뷰는 해쉬태그와 문장으로 구성됨
- 해쉬태그 : 긍/부정 판단 x -> 입지 구분 단어만 판단하여 태그 토큰 카운터
- 문장 : 긍/부정 판단 O -> 긍정문장에 대해서만 명사만 토큰화하여 입지 구분 단어와 유사한 단어를 입지 구분 단어 판단하여 태그 토큰 카운터 
- 입지구분 리스트와 해쉬태그 및 긍정문장 토큰화 

![입지구분 리스트](https://user-images.githubusercontent.com/62299120/113970973-d1e3e800-9872-11eb-952b-914b1d0d8306.PNG)
![해쉬태그는 따로 생각 편집](https://user-images.githubusercontent.com/62299120/113971295-79611a80-9873-11eb-81b1-f4c0db7f57f2.png)
![입지구분 결과](https://user-images.githubusercontent.com/62299120/113971325-867e0980-9873-11eb-97e3-6a2b51383a63.PNG)


``` 
이외 데이터 셋 추가방법
캠핑장 데이터 중 카라반,글램핑,오토의 캠핑장 규모가 정확하지 않음.
야영장명 중 자동차,오토,카라반,글램핑이 들어간 캠핑장이 존재
데이터 셋 수정
```

**데이터 추가한 데이터 셋**

![데이터 전 처리 후 csv](https://user-images.githubusercontent.com/62299120/113971372-9eee2400-9873-11eb-838e-73bde0bd36d3.PNG)  
***
## 추천 알고리즘  
- 추천 알고리즘 간략 설명
![추천 시스템 간략설명](https://user-images.githubusercontent.com/62299120/113972208-3b64f600-9875-11eb-9b3f-2a83475d9f94.PNG)  

#### Recommend Algorithm
- 컨텐츠ID, 야영장명, 태그 칼럼으로 구성된 캠핑장별 태그를 저장할 데이터 셋 생성

![Data 데이터셋 생성](https://user-images.githubusercontent.com/62299120/113972480-a282aa80-9875-11eb-9ae4-54c3f337bde6.PNG)

- 태그화에 필요한 칼럼을 이용하여 Data 데이터 셋에 태그를 넣어줌
- sklearn 라이브러리를 이용하여 태그 칼럼에 대해 캠핑장마다 태그 카운트화 진행 (CountVectorizer)

![태그 카운트화 후 크기](https://user-images.githubusercontent.com/62299120/113972767-29d01e00-9876-11eb-826d-843ff473fe1d.PNG)
```
태그 (18개)
산이 보이는, 계곡이 있는, 섬에 있는, 호수가 보이는, 숲이있는, 바다가 보이는, 도심속에 있는 , 강가에 있는
수영이 가능한, 자동차 캠핑이 가능한, 글램핑이 있는, 카라반이 있는, 애완견 동반가능한, 산책로가 있는 ,아이들과 오기좋은
장비대여가 가능한, 체험이벤트가 있는, 개인 트레일러 가능한
```
- sklean 라이브러리를 이용하여 코사인 유사도를 통해 비슷한 캠핑장을 추천해준다.  
![코사인 유사도 리스트](https://user-images.githubusercontent.com/62299120/113972807-3a809400-9876-11eb-9a6c-70c35809b056.PNG)

### Cosine_Similarity(코사인 유사도)
- 내적공간의 두 벡터간 각도의 코사인값을 이용하여 측정된 벡터간의 유사한 정도를 의미
- TF-IDF를 사용하지 않고 코사인 유사도를 사용한 이유
- -> 이미 정리된 태그칼럼을 가지고 있어 TF-IDF의 단어 중요도 판단을 할 이유가 없다.(가중치가 같기 때문)
- 코사인 유사도를 사용하여 0~1의 값으로 캠핑장마다 태그의 유사성을 판단해 추천해준다.

### Logic
- 코사인 유사도를 이용하여 단어의 유사도를 통해 추천해주는 함수를 구현
- 캠핑장 이름이나 캠핑장 ID만 넣으면 해당 캠핑장과 비슷한 캠핑장 TOP 10개를 리턴해주는 함수

![함수에 넣을 캠핑장 데이터 셋](https://user-images.githubusercontent.com/62299120/113973400-3c972280-9877-11eb-9dce-dc5ef343e911.PNG)  
![TOP10리턴한 데이터 셋](https://user-images.githubusercontent.com/62299120/113973437-4de02f00-9877-11eb-916f-4a7daff9e9de.PNG)  


***Copyright* © 2021 SSAFY_SEOUL3_TEAM4_캠퍼스**

